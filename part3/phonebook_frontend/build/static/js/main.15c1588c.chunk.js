(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{45:function(e,n,t){},46:function(e,n,t){"use strict";t.r(n);var r=t(19),a=t.n(r),c=t(10),u=t(7),o=t(3),i=t(1),s=t(0),d=function(e){var n=e.searchValue,t=e.linkHandler;return Object(s.jsx)("form",{children:Object(s.jsxs)("div",{children:["filter shown with",Object(s.jsx)("input",{value:n,onChange:t})]})})},l=function(e){var n=e.name,t=e.number,r=e.nameHandler,a=e.numberHandler;return Object(s.jsxs)("div",{children:[Object(s.jsxs)("div",{children:["name: ",Object(s.jsx)("input",{value:n,onChange:r})]}),Object(s.jsxs)("div",{children:["number: ",Object(s.jsx)("input",{value:t,onChange:a})]})]})},b=function(e){var n=e.name,t=e.nameHandler,r=e.number,a=e.numberHandler,c=e.addHandler;return Object(s.jsxs)("form",{children:[Object(s.jsx)(l,{name:n,nameHandler:t,number:r,numberHandler:a}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{onClick:c,children:"add"})})]})},j=t(48),m=function(e){var n=e.name,t=e.number,r=e.handleDelete;return Object(s.jsxs)("li",{className:"person-list",onClick:r,children:[n," ",t,Object(s.jsx)("button",{children:"delete"})]})},h=function(e){var n=e.list,t=e.handleDelete;return Object(s.jsx)("div",{children:n.map((function(e){return Object(s.jsx)(m,{name:e.name,number:e.number,handleDelete:t},Object(j.a)())}))})},f=t(9),O=t.n(f),v=t(20),p=t(5),x=t.n(p),g="/api/persons",w={getAll:function(){return x.a.get(g).then((function(e){return e.data}))},addPerson:function(e){return x.a.post(g,e).then((function(e){return e.data}))},deletePerson:function(e){var n=g+"/".concat(e);return x.a.delete(n).then((function(e){return e.status}))},updatePerson:function(){var e=Object(v.a)(O.a.mark((function e(n,t){var r,a,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g+"/".concat(n.id),a={name:n.name,number:t},c=x.a.put(r,a),e.abrupt("return",c.then((function(e){return e})));case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()},H=function(e){var n=e.message,t=e.style;return null===n?null:Object(s.jsx)("div",{className:"success",style:t,children:n})},k=function(){var e=Object(i.useState)([]),n=Object(o.a)(e,2),t=n[0],r=n[1],a=Object(i.useState)(""),l=Object(o.a)(a,2),j=l[0],m=l[1],f=Object(i.useState)(""),O=Object(o.a)(f,2),v=O[0],p=O[1],x=Object(i.useState)(""),g=Object(o.a)(x,2),k=g[0],y=g[1],P=Object(i.useState)(!1),S=Object(o.a)(P,2),C=S[0],D=S[1],N=Object(i.useState)(null),A=Object(o.a)(N,2),I=A[0],E=A[1],J=Object(i.useState)({}),V=Object(o.a)(J,2),B=V[0],q=V[1],z={color:"green"},F={color:"red"};Object(i.useEffect)((function(){w.getAll().then((function(e){r(e)}))}),[]);var G=C?t.filter((function(e){return e.name.includes(k)})):t;return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(H,{message:I,style:B}),Object(s.jsx)(d,{searchValue:k,linkHandler:function(e){0===e.target.value.length?D(!1):D(!0),y(e.target.value)}}),Object(s.jsx)("h2",{children:"Add a new"}),Object(s.jsx)(b,{name:j,nameHandler:function(e){m(e.target.value)},number:v,numberHandler:function(e){p(e.target.value)},addHandler:function(e){e.preventDefault();var n=t.find((function(e){return e.name===j}));if(n)window.confirm("".concat(n.name," is already added to phonebook, replace old number with new one?"))&&w.updatePerson(n,v).then((function(){var e=t.findIndex((function(e){return e.name===n.name})),a=[].concat(Object(u.a)(t.slice(0,e)),[Object(c.a)(Object(c.a)({},n),{},{number:v})],Object(u.a)(t.slice(e+1)));r(a),E("Changed ".concat(n.name,"'s number")),m(""),p("")})).catch((function(e){E("Information of ".concat(n.name," has already been removed from the server")),q(F)}));else{var a={name:j,number:v};w.addPerson(a).then((function(e){r(t.concat(a)),E("Added ".concat(a.name)),q(z),m(""),p("")}))}}}),Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)(h,{list:G,handleDelete:function(e){var n=e.target.parentNode.childNodes[0].data,a=e.target.parentNode.id;n&&a&&window.confirm("Delete ".concat(n,"?"))&&w.deletePerson(a).then((function(e){var n=Object(u.a)(t);n.splice(n.findIndex((function(e){return e.id===a})),1),r(n)}))}})]})};t(45);a.a.render(Object(s.jsx)(k,{}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.15c1588c.chunk.js.map